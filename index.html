<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mini David ðŸ‘»</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
@import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap');

* { margin:0; padding:0; box-sizing:border-box; }

body {
    font-family: 'Montserrat', sans-serif;
    display:flex; justify-content:center; align-items:center;
    min-height:100vh; background:linear-gradient(135deg,#1DB954,#191414); color:#fff;
    padding:20px;
}

.player-container {
    background: rgba(25,20,20,0.95);
    padding:30px; border-radius:20px;
    box-shadow:0 15px 40px rgba(0,0,0,0.4);
    text-align:center; width:100%; max-width:500px; position:relative;
}

.title-container { display:flex; justify-content:center; align-items:center; gap:15px; margin-bottom:20px; }
h1 { font-size:32px; font-weight:700; background:linear-gradient(to right,#1DB954,#1ED760); -webkit-background-clip:text; -webkit-text-fill-color:transparent; }
.ghost-emoji { font-size:32px; animation:float 3s ease-in-out infinite; }
@keyframes float { 0%,100%{transform:translateY(0);}50%{transform:translateY(-10px);} }

.heart-btn { position:absolute; top:30px; right:30px; background:none; border:none; color:#ff4d4d; font-size:24px; cursor:pointer; animation:heartbeat 1.2s infinite; }
@keyframes heartbeat {0%{transform:scale(1);}25%{transform:scale(1.1);}50%{transform:scale(1);}75%{transform:scale(1.1);}100%{transform:scale(1);}}

.song-info { margin-bottom:25px; }
#song-title { font-size:22px; font-weight:600; margin-bottom:5px; }
#song-artist { font-size:16px; color:#b3b3b3; font-weight:400; }

.album-art {
    width:220px; height:220px; border-radius:10px; margin:0 auto 20px;
    overflow:hidden; box-shadow:0 10px 30px rgba(0,0,0,0.5);
    background-size:cover; background-position:center;
    display:flex; align-items:center; justify-content:center;
    transition: transform 0.3s ease;
}

.album-art img { width:100%; height:100%; object-fit:cover; }
.album-art i { font-size:60px; color:rgba(255,255,255,0.2); }

.progress-container {
    width:100%; height:8px; background: rgba(255,255,255,0.2);
    border-radius:10px; margin:20px 0; cursor:pointer; overflow:hidden;
}

.progress {
    height:100%; width:0%; border-radius:10px;
    background: linear-gradient(270deg,#1DB954,#1ED760,#1DB954);
    background-size:600% 100%;
    transition: width 0.1s linear;
    animation: gradientMove 3s linear infinite, pulse 1.5s ease-in-out infinite;
    transform-origin: center center;
}

@keyframes gradientMove { 0%{background-position:0% 50%;} 100%{background-position:100% 50%;} }
@keyframes pulse {0%,100%{transform:scaleY(1);}50%{transform:scaleY(1.05);}}

.time-display { display:flex; justify-content:space-between; margin-bottom:20px; font-size:14px; color:#b3b3b3; }

.main-controls { display:flex; justify-content:center; align-items:center; gap:25px; margin:20px 0; }
.control-btn { background:none; border:none; color:#fff; font-size:20px; cursor:pointer; transition:all 0.2s ease; padding:12px; border-radius:50%; display:flex; align-items:center; justify-content:center; }
.control-btn:hover { color:#1ED760; transform:scale(1.1); }

.play-pause {
    background: linear-gradient(135deg,#1DB954,#1ED760); width:60px; height:60px; font-size:24px;
    box-shadow:0 5px 15px rgba(29,185,84,0.4);
}
.play-pause:hover { transform:scale(1.05); box-shadow:0 8px 20px rgba(29,185,84,0.5); }

.secondary-controls { display:flex; justify-content:center; gap:20px; margin:15px 0; }
.volume-container { display:flex; align-items:center; gap:10px; margin-top:10px; }
.volume-slider { width:100px; -webkit-appearance:none; height:5px; border-radius:5px; background: rgba(255,255,255,0.2); outline:none; }
.volume-slider::-webkit-slider-thumb { -webkit-appearance:none; width:15px; height:15px; border-radius:50%; background:#1DB954; cursor:pointer; }

.playlist-toggle { background: rgba(255,255,255,0.1); border:none; border-radius:30px; padding:10px 20px; color:#fff; margin:20px 0 0; cursor:pointer; transition:all 0.3s ease; font-family:'Montserrat',sans-serif; font-weight:500; }
.playlist-toggle:hover { background: rgba(29,185,84,0.2); }

.playlist-container { max-height:0; overflow:hidden; transition:max-height 0.5s ease; text-align:left; margin-top:15px; }
.playlist-container.show { max-height:300px; overflow-y:auto; }
.playlist { list-style:none; padding:10px 0; }
.playlist li { padding:12px 15px; border-bottom:1px solid rgba(255,255,255,0.1); cursor:pointer; transition:all 0.2s ease; border-radius:5px; margin:5px 0; display:flex; align-items:center; gap:10px; }
.playlist li:hover { background: rgba(255,255,255,0.1); }
.playlist li.playing { background: rgba(29,185,84,0.2); color:#1ED760; font-weight:600; }
.playlist li .song-number { font-size:14px; color:#b3b3b3; width:20px; }
.playlist li.playing .song-number { color:#1ED760; }
.active-mode { color:#1ED760 !important; }

@media (max-width:500px){
    .player-container { padding:20px; }
    .main-controls { gap:15px; }
    .control-btn { padding:10px; font-size:18px; }
    .play-pause { width:55px; height:55px; }
    h1 { font-size:28px; }
    #song-title { font-size:19px; }
    .album-art { width:180px; height:180px; }
}
</style>
</head>
<body>

<div class="player-container">
    <button class="heart-btn" id="heart-btn"><i class="fas fa-heart"></i></button>
    <div class="title-container"><h1>Mini David</h1><div class="ghost-emoji">ðŸ‘»</div></div>
    <div class="album-art" id="album-art"><i class="fas fa-music"></i></div>

    <div class="song-info">
        <div id="song-title">A AP ROCKY LVL</div>
        <div id="song-artist">ASAP Rocky</div>
    </div>

    <div class="progress-container" id="progress-container">
        <div class="progress" id="progress"></div>
    </div>

    <div class="time-display"><span id="current-time">0:00</span><span id="duration">0:00</span></div>

    <div class="main-controls">
        <button class="control-btn" id="shuffle" title="Modo aleatorio"><i class="fas fa-random"></i></button>
        <button class="control-btn" id="prev" title="Anterior"><i class="fas fa-step-backward"></i></button>
        <button class="control-btn play-pause" id="play" title="Reproducir"><i class="fas fa-play"></i></button>
        <button class="control-btn" id="next" title="Siguiente"><i class="fas fa-step-forward"></i></button>
        <button class="control-btn" id="repeat" title="Repetir"><i class="fas fa-redo"></i></button>
    </div>

    <div class="secondary-controls">
        <div class="volume-container"><i class="fas fa-volume-up" id="volume-icon"></i>
            <input type="range" class="volume-slider" id="volume" min="0" max="1" step="0.01" value="1">
        </div>
    </div>

    <button class="playlist-toggle" id="playlist-toggle"><i class="fas fa-list"></i> Lista de reproducciÃ³n</button>
    <div class="playlist-container" id="playlist-container"><ul class="playlist" id="playlist"></ul></div>
    <audio id="player"></audio>
</div>

<script>
const songs=[
{title:"A AP ROCKY LVL", artist:"ASAP Rocky", url:"https://raw.githubusercontent.com/poxynext/mp3-host/main/LVL.mp3", image:"https://i.scdn.co/image/ab67616d0000b2737f1e6df8f3fa0c7d39f5d3fb"},
{title:"Acid Drip", artist:"ASAP Rocky", url:"https://raw.githubusercontent.com/poxynext/mp3-host/main/AcidDrip.mp3", image:"https://i.scdn.co/image/ab67616d0000b273ed3e0bce5d3386e2abef2d55"},
{title:"Salvatore", artist:"Lana Del Rey", url:"https://raw.githubusercontent.com/poxynext/mp3-host/main/Salvatore.mp3", image:"https://images.genius.com/4e1dfe57a41a23fd6c02cfa899025084.1000x1000x1.png"},
{title:"GroupieLove", artist:"Lana Del Rey", url:"https://raw.githubusercontent.com/poxynext/mp3-host/main/GroupieLove.mp3", image:"https://i.scdn.co/image/ab67616d0000b273fc318e44b81e5a67fc7db6ea"},
{title:"Everyday", artist:"ASAP Rocky", url:"https://raw.githubusercontent.com/poxynext/mp3-host/main/Everyday.mp3", image:"https://i.scdn.co/image/ab67616d0000b273f23c1c456d6e8e95d85f1b73"},
{title:"Doin Time", artist:"Lana Del Rey", url:"https://raw.githubusercontent.com/poxynext/mp3-host/main/Doin_Time.mp3", image:"https://i.scdn.co/image/ab67616d0000b2734a69a4eacb6a3f5af3d8f1cf"},
{title:"Cinnamon Girl", artist:"Lana Del Rey", url:"https://raw.githubusercontent.com/poxynext/mp3-host/main/CinnamonGirl.mp3", image:"https://i.scdn.co/image/ab67616d0000b273fb0ad72037d399a8ce28b5c6"},
{title:"BlueJeans", artist:"Lana Del Rey", url:"https://raw.githubusercontent.com/poxynext/mp3-host/main/BlueJeans.mp3", image:"https://i.scdn.co/image/ab67616d0000b273f7d4691c4e5886a28f2d485f"},
{title:"Tu Boda", artist:"Lana Del Rey", url:"https://raw.githubusercontent.com/poxynext/mp3-host/main/tuboda.mp3", image:"https://i.scdn.co/image/ab67616d0000b273cc12345d8e765abcd123ef90"},
{title:"Young and Beautiful", artist:"Lana Del Rey", url:"https://raw.githubusercontent.com/poxynext/mp3-host/main/YoungandBeautiful.mp3", image:"https://i.scdn.co/image/ab67616d0000b2735bb0c47721e2a8dfe2a5d7a2"},
{title:"Ultraviolence", artist:"Lana Del Rey", url:"https://raw.githubusercontent.com/poxynext/mp3-host/main/Ultraviolence.mp3", image:"https://i.scdn.co/image/ab67616d0000b273c719b7e64d0b77e048a3e3c2"}
];

let current=0, isPlaying=false, isShuffle=false, repeatMode=0;
const player=document.getElementById('player'),
playBtn=document.getElementById('play'),
prevBtn=document.getElementById('prev'),
nextBtn=document.getElementById('next'),
shuffleBtn=document.getElementById('shuffle'),
repeatBtn=document.getElementById('repeat'),
progressContainer=document.getElementById('progress-container'),
progress=document.getElementById('progress'),
titleEl=document.getElementById('song-title'),
artistEl=document.getElementById('song-artist'),
currentTimeEl=document.getElementById('current-time'),
durationEl=document.getElementById('duration'),
volumeSlider=document.getElementById('volume'),
volumeIcon=document.getElementById('volume-icon'),
playlistContainer=document.getElementById('playlist-container'),
playlistToggle=document.getElementById('playlist-toggle'),
playlistEl=document.getElementById('playlist'),
albumArt=document.getElementById('album-art');

function initPlaylist() {
    playlistEl.innerHTML='';
    songs.forEach((song,index)=>{
        const li=document.createElement('li');
        li.innerHTML=`<span class="song-number">${index+1}</span> ${song.title} - ${song.artist}`;
        li.dataset.index=index;
        if(index===current) li.classList.add('playing');
        li.addEventListener('click',()=>{
            current=parseInt(li.dataset.index);
            loadSong(current);
            updatePlaylist();
            playSong();
        });
        playlistEl.appendChild(li);
    });
}

function updatePlaylist() {
    const items=playlistEl.querySelectorAll('li');
    items.forEach((item,index)=>{
        if(index===current) item.classList.add('playing');
        else item.classList.remove('playing');
    });
}

playlistToggle.addEventListener('click',()=>{
    playlistContainer.classList.toggle('show');
    if(playlistContainer.classList.contains('show')){
        playlistToggle.innerHTML='<i class="fas fa-chevron-up"></i> Ocultar lista';
    }else{
        playlistToggle.innerHTML='<i class="fas fa-list"></i> Lista de reproducciÃ³n';
    }
});

function loadSong(index){
    player.src=songs[index].url;
    titleEl.textContent=songs[index].title;
    artistEl.textContent=songs[index].artist;

    if(songs[index].image){
        albumArt.style.backgroundImage=`url('${songs[index].image}')`;
        albumArt.innerHTML='';
    }else{
        albumArt.style.backgroundImage='none';
        albumArt.innerHTML='<i class="fas fa-music"></i>';
    }
    albumArt.style.transform='scale(0.9)';
    setTimeout(()=>{albumArt.style.transform='scale(1)';},300);

    player.addEventListener('loadedmetadata',()=>{durationEl.textContent=formatTime(player.duration);});
    updatePlaylist();
}

function formatTime(seconds){if(isNaN(seconds)) return "0:00"; const minutes=Math.floor(seconds/60); seconds=Math.floor(seconds%60); return `${minutes}:${seconds<10?'0':''}${seconds}`;}

function updateProgress(){const{currentTime,duration}=player;if(isNaN(duration)) return; const progressPercent=(currentTime/duration)*100; progress.style.width=`${progressPercent}%`; currentTimeEl.textContent=formatTime(currentTime);}

progressContainer.addEventListener('click',(e)=>{const width=progressContainer.clientWidth; const clickX=e.offsetX; player.currentTime=(clickX/width)*player.duration;});

function playSong(){isPlaying=true; player.play(); playBtn.innerHTML='<i class="fas fa-pause"></i>'; playBtn.title="Pausar";}
function pauseSong(){isPlaying=false; player.pause(); playBtn.innerHTML='<i class="fas fa-play"></i>'; playBtn.title="Reproducir";}
playBtn.addEventListener('click',()=>{isPlaying?pauseSong():playSong();});

prevBtn.addEventListener('click',()=>{current--; if(current<0) current=songs.length-1; loadSong(current); playSong();});
nextBtn.addEventListener('click',()=>{if(isShuffle){playRandomSong();}else{current++; if(current>songs.length-1) current=0;} loadSong(current); playSong();});

function playRandomSong(){let newIndex; do{newIndex=Math.floor(Math.random()*songs.length);}while(newIndex===current && songs.length>1); current=newIndex;}

shuffleBtn.addEventListener('click',()=>{isShuffle=!isShuffle; shuffleBtn.classList.toggle('active-mode',isShuffle); shuffleBtn.title=isShuffle?"Desactivar aleatorio":"Activar aleatorio";});

repeatBtn.addEventListener('click',()=>{repeatMode=(repeatMode+1)%3; if(repeatMode===0){repeatBtn.title="Sin repeticiÃ³n"; repeatBtn.classList.remove('active-mode');}else if(repeatMode===1){repeatBtn.title="Repetir toda la lista"; repeatBtn.classList.add('active-mode');}else{repeatBtn.title="Repetir una canciÃ³n"; repeatBtn.classList.add('active-mode');}});

player.addEventListener('ended',()=>{
    if(repeatMode===2){player.currentTime=0; playSong();}
    else if(repeatMode===1||isShuffle){if(isShuffle) playRandomSong(); else {current++; if(current>songs.length-1) current=0;} loadSong(current); playSong();}
    else pauseSong();
});

volumeSlider.addEventListener('input',()=>{player.volume=volumeSlider.value; if(player.volume==0){volumeIcon.className='fas fa-volume-mute';} else if(player.volume<0.5){volumeIcon.className='fas fa-volume-down';} else{volumeIcon.className='fas fa-volume-up';}});

player.addEventListener('timeupdate',updateProgress);

// Inicializar
loadSong(current); initPlaylist();

// ðŸŽµ AnimaciÃ³n de barra reactiva al audio
const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
const analyser = audioCtx.createAnalyser();
const source = audioCtx.createMediaElementSource(player);
source.connect(analyser);
analyser.connect(audioCtx.destination);
analyser.fftSize = 256;
const bufferLength = analyser.frequencyBinCount;
const dataArray = new Uint8Array(bufferLength);

function animateProgress(){
    requestAnimationFrame(animateProgress);
    analyser.getByteFrequencyData(dataArray);
    let sum=0; for(let i=0;i<dataArray.length;i++){sum+=dataArray[i];}
    let avg=sum/dataArray.length;
    const scale = 1 + avg/500; // Ajusta intensidad
    progress.style.transform = `scaleY(${scale})`;
}

animateProgress();
</script>
</body>
</html>
